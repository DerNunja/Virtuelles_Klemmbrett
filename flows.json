[
    {
        "id": "b6c49126b53c3f19",
        "type": "tab",
        "label": "MeldungErstellen",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "89825a0049521b38",
        "type": "tab",
        "label": "MeldungSichten",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8149379c027f98bb",
        "type": "tab",
        "label": "MachineView",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "74fddf0e9298beb9",
        "type": "ui-base",
        "name": "My Dashboard",
        "path": "/dashboard",
        "appIcon": "",
        "includeClientData": true,
        "acceptsClientConfig": [
            "ui-notification",
            "ui-control"
        ],
        "showPathInSidebar": false,
        "headerContent": "page",
        "navigationStyle": "default",
        "titleBarStyle": "default",
        "showReconnectNotification": true,
        "notificationDisplayTime": 1,
        "showDisconnectNotification": true,
        "allowInstall": false
    },
    {
        "id": "302e3287f635dd2e",
        "type": "ui-theme",
        "name": "Default Theme",
        "colors": {
            "surface": "#ffffff",
            "primary": "#0094CE",
            "bgPage": "#eeeeee",
            "groupBg": "#ffffff",
            "groupOutline": "#cccccc"
        },
        "sizes": {
            "density": "default",
            "pagePadding": "12px",
            "groupGap": "12px",
            "groupBorderRadius": "4px",
            "widgetGap": "12px"
        }
    },
    {
        "id": "53322e71394a01b8",
        "type": "ui-page",
        "name": "add",
        "ui": "74fddf0e9298beb9",
        "path": "/add",
        "icon": "home",
        "layout": "grid",
        "theme": "302e3287f635dd2e",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 2,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "b4e4776019c59a5c",
        "type": "ui-group",
        "name": "Meldung_erstellen",
        "page": "53322e71394a01b8",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "439b1ef45daa8130",
        "type": "ui-page",
        "name": "view",
        "ui": "74fddf0e9298beb9",
        "path": "/view",
        "icon": "home",
        "layout": "grid",
        "theme": "302e3287f635dd2e",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 1,
        "className": "",
        "visible": "true",
        "disabled": "false"
    },
    {
        "id": "8cfee7582093513a",
        "type": "ui-group",
        "name": "Description",
        "page": "439b1ef45daa8130",
        "width": 6,
        "height": 1,
        "order": 2,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "c2965404f06022d6",
        "type": "ui-group",
        "name": "Meldung sichten",
        "page": "439b1ef45daa8130",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "e0f2f8f3f2a64b7a",
        "type": "ui-page",
        "name": "machine",
        "ui": "74fddf0e9298beb9",
        "path": "/machine",
        "icon": "",
        "layout": "grid",
        "theme": "302e3287f635dd2e",
        "breakpoints": [
            {
                "name": "Default",
                "px": "0",
                "cols": "3"
            },
            {
                "name": "Tablet",
                "px": "576",
                "cols": "6"
            },
            {
                "name": "Small Desktop",
                "px": "768",
                "cols": "9"
            },
            {
                "name": "Desktop",
                "px": "1024",
                "cols": "12"
            }
        ],
        "order": 3,
        "className": "",
        "visible": true,
        "disabled": false
    },
    {
        "id": "6a8a3a5f0b7f4e2b",
        "type": "ui-group",
        "name": "MQTT Verbindung",
        "page": "e0f2f8f3f2a64b7a",
        "width": 6,
        "height": 1,
        "order": 1,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "2a1a2c3d4e5f6789",
        "type": "ui-group",
        "name": "Live Telemetrie",
        "page": "e0f2f8f3f2a64b7a",
        "width": 6,
        "height": 1,
        "order": 2,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "f1b2c3d4e5f60718",
        "type": "ui-group",
        "name": "KPIs",
        "page": "e0f2f8f3f2a64b7a",
        "width": 6,
        "height": 1,
        "order": 3,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "a1b2c3d4e5f6a7b8",
        "type": "ui-group",
        "name": "Historie",
        "page": "e0f2f8f3f2a64b7a",
        "width": 12,
        "height": 1,
        "order": 4,
        "showTitle": true,
        "className": "",
        "visible": "true",
        "disabled": "false",
        "groupType": "default"
    },
    {
        "id": "mqtt-broker-01",
        "type": "mqtt-broker",
        "name": "Factory MQTT",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "439bc5fe93132122",
        "type": "OpcUa-Endpoint",
        "endpoint": "opc.tcp://172.23.193.10:4840",
        "secpol": "None",
        "secmode": "None",
        "none": true,
        "login": false,
        "usercert": false,
        "usercertificate": "",
        "userprivatekey": ""
    },
    {
        "id": "dc45cb42a22584e0",
        "type": "ui-form",
        "z": "b6c49126b53c3f19",
        "name": "Meldung erstellen !",
        "group": "b4e4776019c59a5c",
        "label": "",
        "order": 1,
        "width": 0,
        "height": 0,
        "options": [
            {
                "label": "Titel",
                "key": "Titel_Eingabe",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "ID",
                "key": "ID_Eingabe",
                "type": "text",
                "required": true,
                "rows": null
            },
            {
                "label": "Art des Problems",
                "key": "Problem_Eingabe",
                "type": "dropdown",
                "required": true,
                "rows": null
            },
            {
                "label": "Beschreibung",
                "key": "Desc_Eingabe",
                "type": "multiline",
                "required": true,
                "rows": 3
            }
        ],
        "formValue": {
            "Titel_Eingabe": "",
            "ID_Eingabe": "",
            "Problem_Eingabe": "",
            "Desc_Eingabe": ""
        },
        "payload": "",
        "submit": "Absenden",
        "cancel": "Löschen",
        "resetOnSubmit": true,
        "topic": "topic",
        "topicType": "msg",
        "splitLayout": "",
        "className": "",
        "passthru": false,
        "dropdownOptions": [
            {
                "dropdown": "Problem_Eingabe",
                "value": "defect",
                "label": "Störung"
            },
            {
                "dropdown": "Problem_Eingabe",
                "value": "info",
                "label": "Information"
            },
            {
                "dropdown": "Problem_Eingabe",
                "value": "idea",
                "label": "Idee"
            }
        ],
        "x": 310,
        "y": 180,
        "wires": [
            [
                "1b90d5f8ba36fa62"
            ]
        ]
    },
    {
        "id": "1b90d5f8ba36fa62",
        "type": "function",
        "z": "b6c49126b53c3f19",
        "name": "function 1",
        "func": "msg.payload = {\n    title: msg.payload.Titel_Eingabe,\n    id: msg.payload.ID_Eingabe,\n    problemType: msg.payload.Problem_Eingabe,\n    description: msg.payload.Desc_Eingabe\n};\n\n// Die HTTP-Anfrage vorbereiten\nmsg.headers = {\n    \"Content-Type\": \"application/json\"\n};\n\nmsg.url = \"http://localhost:8000/add-message\";  // Ziel-URL \nmsg.method = \"POST\";  // HTTP-Methode POST\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 180,
        "wires": [
            [
                "2d93b0f407df5e68"
            ]
        ]
    },
    {
        "id": "2d93b0f407df5e68",
        "type": "http request",
        "z": "b6c49126b53c3f19",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 770,
        "y": 180,
        "wires": [
            [
                "2ddb3a7e48c2f8cc"
            ]
        ]
    },
    {
        "id": "2ddb3a7e48c2f8cc",
        "type": "debug",
        "z": "b6c49126b53c3f19",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 180,
        "wires": []
    },
    {
        "id": "dcfd6f5032a35659",
        "type": "ui-text",
        "z": "89825a0049521b38",
        "group": "8cfee7582093513a",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#717171",
        "wrapText": true,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 1290,
        "y": 340,
        "wires": []
    },
    {
        "id": "b9152c0be0023ef5",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "function 2",
        "func": "msg.method = \"GET\";\nmsg.url = \"http://localhost:8000/messages\";\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 240,
        "wires": [
            [
                "58adef30d20c46c9"
            ]
        ]
    },
    {
        "id": "58adef30d20c46c9",
        "type": "http request",
        "z": "89825a0049521b38",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 530,
        "y": 240,
        "wires": [
            [
                "b967d936138bfecb"
            ]
        ]
    },
    {
        "id": "3fa9d75424b64ae4",
        "type": "ui-table",
        "z": "89825a0049521b38",
        "group": "c2965404f06022d6",
        "name": "Meldung sichten - Table",
        "label": "",
        "order": 1,
        "width": 0,
        "height": 0,
        "maxrows": 0,
        "passthru": false,
        "autocols": true,
        "showSearch": true,
        "deselect": true,
        "selectionType": "click",
        "columns": [],
        "mobileBreakpoint": "sm",
        "mobileBreakpointType": "defaults",
        "action": "replace",
        "className": "",
        "x": 890,
        "y": 240,
        "wires": [
            [
                "bc9591cd8622b848",
                "47458af47e8faac5"
            ]
        ]
    },
    {
        "id": "7b60f4b9e27987f7",
        "type": "ui-event",
        "z": "89825a0049521b38",
        "ui": "74fddf0e9298beb9",
        "name": "",
        "x": 130,
        "y": 140,
        "wires": [
            [
                "b9152c0be0023ef5"
            ]
        ]
    },
    {
        "id": "bc9591cd8622b848",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "Get Selected",
        "func": "const row = msg.payload || {};\nconst full = flow.get(\"messages_full\") || [];\nconst selected = full.find(m => String(m.id) === String(row.id));\n\nif (!selected) {\n  node.warn(\"Keine vollständige Meldung zum Eintrag gefunden.\");\n  return [null, null];\n}\n\n// Speichere Meldung für MachineView\nflow.set(\"activeMessage\", selected);\n\n// Output 1 Beschreibung aktualisieren\nconst out1 = { payload: selected.description || \"\" };\n\nreturn [out1]",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 990,
        "y": 400,
        "wires": [
            [
                "dcfd6f5032a35659",
                "53f26d1519ea249d"
            ]
        ]
    },
    {
        "id": "2f0e9052afe257b4",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "function 4",
        "func": "let selected = flow.get(\"selected\");\nif (!selected) {\n    node.warn(\"Keine Meldung ausgewählt!\");\n    return null;\n}\n\nmsg.method = \"DELETE\";\nmsg.url = \"http://localhost:8000/messages/\" + selected.id;\nmsg.payload = {};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 400,
        "wires": [
            [
                "28956bc620700e14"
            ]
        ]
    },
    {
        "id": "28956bc620700e14",
        "type": "http request",
        "z": "89825a0049521b38",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 510,
        "y": 400,
        "wires": [
            [
                "b9ccc1b55fc2686f",
                "b9152c0be0023ef5"
            ]
        ]
    },
    {
        "id": "b9ccc1b55fc2686f",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "function 5",
        "func": "flow.set(\"selected\", null);\nmsg.payload = \"\";  \nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 700,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "d924ebe04dfcb040",
        "type": "ui-button",
        "z": "89825a0049521b38",
        "group": "c2965404f06022d6",
        "name": "Löschen",
        "label": "Löschen",
        "order": 3,
        "width": 0,
        "height": 0,
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 100,
        "y": 400,
        "wires": [
            [
                "2f0e9052afe257b4"
            ]
        ]
    },
    {
        "id": "2c72ba2097ae6d08",
        "type": "ui-button",
        "z": "89825a0049521b38",
        "group": "c2965404f06022d6",
        "name": "Akktualisieren",
        "label": "Akktualisieren",
        "order": 2,
        "width": 0,
        "height": 0,
        "emulateClick": false,
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 120,
        "y": 240,
        "wires": [
            [
                "b9152c0be0023ef5"
            ]
        ]
    },
    {
        "id": "47458af47e8faac5",
        "type": "debug",
        "z": "89825a0049521b38",
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1120,
        "y": 100,
        "wires": []
    },
    {
        "id": "b967d936138bfecb",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "function 6",
        "func": "const full = Array.isArray(msg.payload) ? msg.payload : [];\nflow.set(\"messages_full\", full); \n\nconst rows = full.map(({ title, id, problemType, timestamp }) => ({\n  title, id, problemType, timestamp\n}));\n\nmsg.payload = rows;\nmsg.ui_control = {\n  columns: [\n    { field: \"title\", title: \"Titel\" },\n    { field: \"id\", title: \"ID\" },\n    { field: \"problemType\", title: \"Art\" },\n    { field: \"timestamp\", title: \"Zeit\" }\n  ]\n};\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 240,
        "wires": [
            [
                "3fa9d75424b64ae4"
            ]
        ]
    },
    {
        "id": "047952d3ada125ba",
        "type": "OpcUa-Client",
        "z": "89825a0049521b38",
        "endpoint": "439bc5fe93132122",
        "action": "subscribe",
        "deadbandtype": "a",
        "deadbandvalue": 1,
        "time": 10,
        "timeUnit": "s",
        "certificate": "n",
        "localfile": "",
        "localkeyfile": "",
        "securitymode": "None",
        "securitypolicy": "None",
        "useTransport": false,
        "maxChunkCount": 1,
        "maxMessageSize": 8192,
        "receiveBufferSize": 8192,
        "sendBufferSize": 8192,
        "setstatusandtime": false,
        "keepsessionalive": false,
        "name": "",
        "applicationName": "",
        "applicationUri": "",
        "x": 1100,
        "y": 580,
        "wires": [
            [
                "cd8a77a09e79d380",
                "18e06d8bcb866038"
            ],
            [],
            []
        ]
    },
    {
        "id": "d22762d931dbd5c9",
        "type": "OpcUa-Item",
        "z": "89825a0049521b38",
        "item": "ns=3;s=\"Leistung\"",
        "datatype": "Int16",
        "value": "",
        "name": "",
        "x": 860,
        "y": 580,
        "wires": [
            [
                "047952d3ada125ba"
            ]
        ]
    },
    {
        "id": "cd8a77a09e79d380",
        "type": "debug",
        "z": "89825a0049521b38",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1360,
        "y": 600,
        "wires": []
    },
    {
        "id": "bd11d89626e7f569",
        "type": "inject",
        "z": "89825a0049521b38",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 600,
        "y": 580,
        "wires": [
            [
                "d22762d931dbd5c9",
                "dynamic-opc-ua-selector"
            ]
        ]
    },
    {
        "id": "18e06d8bcb866038",
        "type": "ui-chart",
        "z": "89825a0049521b38",
        "group": "a1b2c3d4e5f6a7b8",
        "name": "",
        "label": "Test",
        "order": 2,
        "chartType": "line",
        "category": "topic",
        "categoryType": "msg",
        "xAxisLabel": "",
        "xAxisProperty": "",
        "xAxisPropertyType": "timestamp",
        "xAxisType": "time",
        "xAxisFormat": "",
        "xAxisFormatType": "auto",
        "xmin": "",
        "xmax": "",
        "yAxisLabel": "",
        "yAxisProperty": "payload",
        "yAxisPropertyType": "msg",
        "ymin": "",
        "ymax": "1000",
        "bins": 10,
        "action": "append",
        "stackSeries": false,
        "pointShape": "circle",
        "pointRadius": 4,
        "showLegend": true,
        "removeOlder": 1,
        "removeOlderUnit": "3600",
        "removeOlderPoints": "",
        "colors": [
            "#0095ff",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#a347e1",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "textColor": [
            "#666666"
        ],
        "textColorDefault": true,
        "gridColor": [
            "#e5e5e5"
        ],
        "gridColorDefault": true,
        "width": 6,
        "height": 8,
        "className": "",
        "interpolation": "linear",
        "x": 1370,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "dynamic-opc-ua-selector",
        "type": "function",
        "z": "89825a0049521b38",
        "name": "OPC UA Node dynamisch nach ID auswählen",
        "func": "// Vom Selected-Event: activeMessage aus Flow holen\nconst msgData = flow.get(\"activeMessage\");\nif (!msgData || !msgData.id) {\n    node.warn(\"Keine aktive Meldung vorhanden!\");\n    return null;\n}\n\n// ID aus Meldung → Bauteil-ID\nconst id = msgData.id;\n\n// Dynamische OPC-UA NodeId definieren\n//msg.topic = `ns=3;s=\"${id}\"`;\n\n// Für UI Anzeige\nmsg.topic = \"multiple\"\nmsg.payload = { nodeId: `ns=3;s=\"${id}\"`, datatype: \"Int16\"}\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 760,
        "wires": [
            [
                "opcua-client-dynamic",
                "0ccdb36b27df4b6e"
            ]
        ]
    },
    {
        "id": "opcua-client-dynamic",
        "type": "OpcUa-Client",
        "z": "89825a0049521b38",
        "endpoint": "439bc5fe93132122",
        "action": "subscribe",
        "deadbandtype": "a",
        "deadbandvalue": 1,
        "time": 1,
        "timeUnit": "s",
        "localfile": "",
        "localkeyfile": "",
        "useTransport": false,
        "maxChunkCount": "",
        "maxMessageSize": "",
        "receiveBufferSize": "",
        "sendBufferSize": "",
        "setstatusandtime": false,
        "keepsessionalive": false,
        "name": "Dynamic OPC UA Client",
        "applicationName": "",
        "applicationUri": "",
        "x": 1250,
        "y": 760,
        "wires": [
            [
                "9b40f620b0380b6f",
                "0ccdb36b27df4b6e"
            ],
            [],
            []
        ]
    },
    {
        "id": "9b40f620b0380b6f",
        "type": "ui-chart",
        "z": "89825a0049521b38",
        "group": "c2965404f06022d6",
        "name": "",
        "label": "chart",
        "order": 9007199254740991,
        "chartType": "line",
        "category": "topic",
        "categoryType": "msg",
        "xAxisLabel": "",
        "xAxisProperty": "",
        "xAxisPropertyType": "timestamp",
        "xAxisType": "time",
        "xAxisFormat": "",
        "xAxisFormatType": "auto",
        "xmin": "",
        "xmax": "",
        "yAxisLabel": "",
        "yAxisProperty": "payload",
        "yAxisPropertyType": "msg",
        "ymin": "",
        "ymax": "",
        "bins": 10,
        "action": "append",
        "stackSeries": false,
        "pointShape": "circle",
        "pointRadius": 4,
        "showLegend": true,
        "removeOlder": 1,
        "removeOlderUnit": "3600",
        "removeOlderPoints": "",
        "colors": [
            "#0095ff",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#a347e1",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "textColor": [
            "#666666"
        ],
        "textColorDefault": true,
        "gridColor": [
            "#e5e5e5"
        ],
        "gridColorDefault": true,
        "width": 6,
        "height": 8,
        "className": "",
        "interpolation": "linear",
        "x": 1610,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "0ccdb36b27df4b6e",
        "type": "debug",
        "z": "89825a0049521b38",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1460,
        "y": 980,
        "wires": []
    },
    {
        "id": "53f26d1519ea249d",
        "type": "debug",
        "z": "89825a0049521b38",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1280,
        "y": 220,
        "wires": []
    },
    {
        "id": "c0ffee1122334455",
        "type": "ui-switch",
        "z": "8149379c027f98bb",
        "name": "Pause Anzeige",
        "label": "Pause Anzeige",
        "group": "6a8a3a5f0b7f4e2b",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": true,
        "decouple": false,
        "topic": "ui/pause",
        "topicType": "str",
        "className": "",
        "layout": "",
        "clickableArea": "switch",
        "onvalue": "",
        "onvalueType": "str",
        "onicon": "",
        "oncolor": "",
        "offvalue": "",
        "offvalueType": "str",
        "officon": "",
        "offcolor": "",
        "x": 780,
        "y": 780,
        "wires": [
            [
                "bada55f00d123456"
            ]
        ]
    },
    {
        "id": "bada55f00d123456",
        "type": "change",
        "z": "8149379c027f98bb",
        "name": "flow.pause = msg.payload",
        "rules": [
            {
                "t": "set",
                "p": "pause",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "deadbeefcafefeed",
        "type": "ui-button",
        "z": "8149379c027f98bb",
        "group": "f1b2c3d4e5f60718",
        "name": "Reset KPIs",
        "label": "Reset KPIs",
        "order": 2,
        "width": 6,
        "height": 1,
        "emulateClick": false,
        "className": "",
        "icon": "",
        "iconPosition": "left",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "buttonColor": "",
        "textColor": "",
        "iconColor": "",
        "enableClick": true,
        "enablePointerdown": false,
        "pointerdownPayload": "",
        "pointerdownPayloadType": "str",
        "enablePointerup": false,
        "pointerupPayload": "",
        "pointerupPayloadType": "str",
        "x": 830,
        "y": 720,
        "wires": [
            [
                "beadedcab005e5e5"
            ]
        ]
    },
    {
        "id": "beadedcab005e5e5",
        "type": "change",
        "z": "8149379c027f98bb",
        "name": "flow.kpi = {good:0,bad:0}",
        "rules": [
            {
                "t": "set",
                "p": "kpi",
                "pt": "flow",
                "to": "{\"good\":0,\"bad\":0}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1130,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "bf605edd2b947475",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "Nach Meldung filtern",
        "func": "const active = flow.get(\"activeMessage\");\n\nif (!active) {\n    return msg;\n}\n\n// Beispiel: Meldung problemType=\"defect\" → besondere Analyse\nmsg.activeMessage = active;\n\nmsg.payload.activeMessage = active;\n\nreturn msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 380,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "show-selected-bauteil",
        "type": "ui-text",
        "z": "8149379c027f98bb",
        "group": "6a8a3a5f0b7f4e2b",
        "order": 2,
        "width": "",
        "height": "",
        "name": "Bauteil Anzeige",
        "label": "Ausgewähltes Bauteil",
        "format": "{{msg.payload.title}} (ID: {{msg.payload.selectedId}})",
        "layout": "row-left",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "wrapText": false,
        "className": "",
        "value": "payload",
        "valueType": "msg",
        "x": 1020,
        "y": 480,
        "wires": []
    },
    {
        "id": "Parse-MV",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "Parse Telemetrie",
        "func": "let obj = msg.payload;\ntry {\n    if (typeof obj === 'string') obj = JSON.parse(obj);\n} catch {}\nmsg.telemetry = obj;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 460,
        "wires": [
            [
                "MV-Live-Format",
                "MV-KPIs",
                "MV-History"
            ]
        ]
    },
    {
        "id": "Filter-MV-By-ID",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "Nur Telemetrie vom aktiven Bauteil",
        "func": "const active = flow.get(\"activeMessage\");\nif (!active) return msg;\nmsg.active = active;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "MV-Live-Format",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "Live Werte formatieren",
        "func": "const t = msg.telemetry;\nmsg.payload = JSON.stringify(t);\nreturn msg;",
        "outputs": 1,
        "x": 660,
        "y": 380,
        "wires": [
            [
                "MV-Live-UI"
            ]
        ]
    },
    {
        "id": "MV-Live-UI",
        "type": "ui-text",
        "z": "8149379c027f98bb",
        "group": "2a1a2c3d4e5f6789",
        "order": 1,
        "name": "MachineView Live Telemetrie",
        "label": "Telemetrie",
        "format": "{{msg.payload}}",
        "x": 980,
        "y": 340,
        "wires": []
    },
    {
        "id": "MV-KPIs",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "KPIs berechnen",
        "func": "const t = msg.telemetry;\nconst k = flow.get(\"kpi\") || {good:0, bad:0};\nif (t.good) k.good += t.good;\nif (t.bad) k.bad += t.bad;\nk.total = k.good + k.bad;\nk.rate = k.total ? k.bad/k.total : 0;\nflow.set(\"kpi\", k);\nmsg.payload = `Gut: ${k.good} | Schlecht: ${k.bad} | Quote: ${(k.rate*100).toFixed(1)}%`;\nreturn msg;",
        "outputs": 1,
        "x": 780,
        "y": 600,
        "wires": [
            [
                "MV-Analyse"
            ]
        ]
    },
    {
        "id": "MV-Analyse",
        "type": "ui-text",
        "z": "8149379c027f98bb",
        "group": "f1b2c3d4e5f60718",
        "order": 1,
        "name": "Analyse",
        "label": "Analyse",
        "format": "{{msg.payload}}",
        "x": 1000,
        "y": 580,
        "wires": []
    },
    {
        "id": "MV-History",
        "type": "function",
        "z": "8149379c027f98bb",
        "name": "Historie",
        "func": "const t = msg.telemetry;\nconst ts = new Date();\nmsg.payload = [\n    {series:\"temp\", x: ts, y: t.temperature},\n    {series:\"vib\", x: ts, y: t.vibration}\n];\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 640,
        "wires": [
            [
                "MV-History-Chart"
            ]
        ]
    },
    {
        "id": "MV-History-Chart",
        "type": "ui-chart",
        "z": "8149379c027f98bb",
        "group": "a1b2c3d4e5f6a7b8",
        "name": "",
        "label": "Historie",
        "order": 1,
        "chartType": "line",
        "category": "",
        "categoryType": "msg",
        "xAxisLabel": "",
        "xAxisProperty": "",
        "xAxisPropertyType": "timestamp",
        "xAxisType": "time",
        "xAxisFormat": "",
        "xAxisFormatType": "auto",
        "xmin": "",
        "xmax": "",
        "yAxisLabel": "",
        "yAxisProperty": "",
        "yAxisPropertyType": "property",
        "ymin": "",
        "ymax": "",
        "bins": "",
        "stackSeries": false,
        "pointRadius": "",
        "showLegend": true,
        "removeOlder": "",
        "removeOlderPoints": "",
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "textColor": [
            "#666666"
        ],
        "textColorDefault": true,
        "gridColor": [
            "#e5e5e5"
        ],
        "gridColorDefault": true,
        "width": "",
        "height": "",
        "className": "",
        "interpolation": "linear",
        "x": 1000,
        "y": 640,
        "wires": [
            []
        ]
    }
]
